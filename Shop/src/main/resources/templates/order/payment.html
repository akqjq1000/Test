<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:include="@{/main/index-include}"></th:block>
    <title>Title</title>

    <style>
        table {
            border-top: 3px solid #ccc;
            width: 95%;
        }
        table tr td {
            border: 2px solid #f2f2f2;
            font-size: 10pt;
        }
        table tr td:nth-child(1){
            font-weight: bold;
            width: 200px;
            text-align: right;
            padding-right: 10px;
            background: #eee;
        }
        table tr td:nth-child(2) {
            width: 80%;
            text-align: left;
            padding-left: 10px;
        }
    </style>

    <script>
        function changeAddress() {
            let option = "width=800, height= 510, location=no";
            var windowObj = window.open("/orders/change-shipping-address-list?menu=change-shipping-address", '배송지 변경', option);
        }

    </script>
</head>
<body>
<form action="/orders/add-order" method="post">
    <div class="container">
        <div class="row">
            <h1 class="logo"><a href="/">OnePage</a></h1>
        </div>
        <hr>
        <div class="row">
            <h3>구매자 정보</h3>
        </div>
        <div class="row payment-member-info">
            <table class="payment-table" border="1">
                <tr>
                    <td>이름</td>
                    <td th:text="${member.name}"></td>
                </tr>
                <tr>
                    <td>이메일</td>
                    <td th:text="${member.email}"></td>
                </tr>
                <tr>
                    <td>휴대폰 번호</td>
                    <td th:text="${member.phone}"></td>
                </tr>
            </table>
        </div>
        <div class="row">
            <h3>받는사람 정보</h3>
            <input type="button" value="배송지 변경" onclick="changeAddress()">
        </div>
        <div class="row payment-shipping-address">
            <table>
                <th:block th:each="msa : ${memberShippingAddressList}" th:if="${msa.representative == 1}">
                    <tr>
                        <td>
                            이름
                            <input type="hidden" name="shippingAddressNo" th:value="${msa.id}">
                        </td>
                        <td th:text="${msa.name}" name="name"></td>
                    </tr>
                    <tr>
                        <td>배송주소</td>
                        <td th:text="${msa.address}" name="address"></td>
                    </tr>
                    <tr>
                        <td>휴대폰 번호</td>
                        <td th:text="${msa.phone}" name="phone"></td>
                    </tr>
                    <tr>
                        <td>배송 시 요청사항</td>
                        <td th:text="${msa.comments}" name="comments"></td>
                    </tr>
                </th:block>
                <th:block th:if="${memberShippingAddressList.size() == 0}">
                    <tr>
                        <td>
                            이름
                            <input type="hidden" name="shippingAddressNo" value="">
                        </td>
                        <td name="name"></td>
                    </tr>
                    <tr>
                        <td>배송주소</td>
                        <td name="address"></td>
                    </tr>
                    <tr>
                        <td>휴대폰 번호</td>
                        <td name="phone"></td>
                    </tr>
                    <tr>
                        <td>배송 시 요청사항</td>
                        <td name="comments"></td>
                    </tr>
                </th:block>
            </table>
        </div>
        <div class="row">
            <h3>제품 정보</h3>
        </div>
        <div class="row payment-product">
            <table>
                <th:block th:each="order, i : ${orderList}">
                    <tr>
                        <td>제품명
                            <input type="hidden" name="count" th:value="${order.count}">
                            <input type="hidden" name="productNo" th:value="${order.product.id}">
                        </td>
                        <td th:text="${order.product.name}"></td>
                    </tr>
                    <tr>
                        <td>옵션</td>
                        <td>
                            <th:block th:each="opt : ${order.orderOptions}">
                                <input type="hidden" th:name="'optionNo' + ${i.index}" th:value="${opt.optionNo}">
                                <input type="hidden" th:name="'optionValueNo' + ${i.index}" th:each="optVal : ${optionValueList}" th:value="${optVal.id}" th:if="${optVal.id == opt.optionValueNo}">
                                <span th:each="optVal : ${optionValueList}" th:text="${optVal.name}" th:if="${optVal.id == opt.optionValueNo}"></span>
                            </th:block>
                        </td>
                    </tr>
                </th:block>

            </table>
        </div>
        <div class="row">
            <h3>결제 정보</h3>
        </div>
        <div class="row payment-way">
            <table>
                <tr>
                    <td>총상품가격</td>
                    <td th:text="${totalPrice}"></td>
                </tr>
                <tr>
                    <td>할인쿠폰</td>
                    <td>
                        0 원 <input type="button" value="할인쿠폰 적용하기">
                    </td>
                </tr>
                <tr>
                    <td>배송비</td>
                    <td th:text="${shippingFee}"></td>
                </tr>
                <tr>
                    <td>포인트</td>
                    <td><span th:text="'보유: ' + ${member.point}"></span>p    사용:<input type="number" value="0"></td>
                </tr>
                <tr>
                    <td>총결제금액</td>
                    <td th:text="${shippingFee + totalPrice}"></td>
                </tr>
                <tr>
                    <td>결제방법</td>
                    <td>
                        신용/체크카드<input type="radio" id="card" name="paymentWay" value="card" checked>
                        계좌이체<input type="radio" id="money" name="paymentWay" value="money">

                        <style>
                             #moneyView, #cardView{
                                display: none;
                            }
                            #card:checked~ .payment-choice #cardView {display: block;}
                            #money:checked~ .payment-choice #moneyView {
                                display: block;
                            }
                        </style>

                        <div class="payment-choice">
                            <div id="cardView">
                                <select name="cardType">
                                    <option value="-1">선택</option>
                                    <option value="1">국민카드</option>
                                    <option value="2">BC카드</option>
                                    <option value="3">신한카드</option>
                                    <option value="4">우리카드</option>
                                    <option value="5">현대카드</option>
                                    <option value="6">삼성카드</option>
                                    <option value="7">롯데카드</option>
                                    <option value="8">농협카드</option>
                                </select>
                                <input type="text" name="cardNumber" placeholder="카드번호 입력">
                            </div>
                            <div id="moneyView">
                                <select name="moneyType">
                                    <option value="-1">선택</option>
                                    <option value="1">국민은행</option>
                                    <option value="2">IBK기업은행</option>
                                    <option value="3">신한은행</option>
                                    <option value="4">우리은행</option>
                                    <option value="5">하나은행</option>
                                    <option value="6">우체국</option>
                                    <option value="7">롯데카드</option>
                                </select>
                                <input type="text" name="moneyNumber" placeholder="계좌번호 입력">
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
        <div class="row">
            <input type="hidden" name="cnt" th:value="${orderList.size()}">
            <input type="hidden" name="couponNo" value="">
            <input type="hidden" name="totalPrice" th:value="${shippingFee + totalPrice}">
            <input type="submit" value="결제하기">
        </div>
    </div>
</form>

<th:block th:include="@{/main/index-footer}"></th:block>
</body>
</html>